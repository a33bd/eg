local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Remove old GUI if it exists
local prev = PlayerGui:FindFirstChild("SyntaxError_GUI")
if prev then prev:Destroy() end

-- Main GUI container
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "SyntaxError_GUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = PlayerGui

-- Main frame
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 360, 0, 260)
MainFrame.Position = UDim2.new(0.5, -180, 0.5, -130)
MainFrame.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui
Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 16)

-- Logo
local Img = Instance.new("ImageLabel")
Img.Size = UDim2.new(0, 100, 0, 100)
Img.Position = UDim2.new(0, 10, 0, 10)
Img.BackgroundTransparency = 1
Img.Image = "rbxassetid://76418305910736"
Img.Parent = MainFrame
Instance.new("UICorner", Img).CornerRadius = UDim.new(1, 0)

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(0.6, 0, 0, 28)
Title.Position = UDim2.new(0.35, 0, 0, 15)
Title.BackgroundTransparency = 1
Title.Text = "SyntaxError Private"
Title.TextColor3 = Color3.fromRGB(255, 0, 0)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 22
Title.Parent = MainFrame
Title.TextStrokeTransparency = 0
Title.TextStrokeColor3 = Color3.new(0,0,0)

-- Credit
local Credit = Instance.new("TextLabel")
Credit.Size = UDim2.new(0.6, 0, 0, 20)
Credit.Position = UDim2.new(0.35, 0, 0, 38)
Credit.BackgroundTransparency = 1
Credit.Text = "Made by SyntaxError"
Credit.TextColor3 = Color3.fromRGB(255, 255, 255)
Credit.Font = Enum.Font.Gotham
Credit.TextSize = 14
Credit.Parent = MainFrame
Credit.TextStrokeTransparency = 0
Credit.TextStrokeColor3 = Color3.new(0,0,0)

-- FE Scripts Note
local FeScriptsNote = Instance.new("TextLabel")
FeScriptsNote.Size = UDim2.new(0.6, 0, 0, 10)
FeScriptsNote.Position = UDim2.new(0.35, 0, 0, 60)
FeScriptsNote.BackgroundTransparency = 1
FeScriptsNote.Text = "FE SCRIPTS ðŸ‘‡"
FeScriptsNote.TextColor3 = Color3.fromRGB(255, 255, 255)
FeScriptsNote.Font = Enum.Font.GothamBold
FeScriptsNote.TextSize = 11
FeScriptsNote.Parent = MainFrame
FeScriptsNote.TextStrokeTransparency = 0
FeScriptsNote.TextStrokeColor3 = Color3.new(0,0,0)

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -40, 0, 10)
CloseBtn.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.Text = "-"
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.TextSize = 20
CloseBtn.Parent = MainFrame
Instance.new("UICorner", CloseBtn).CornerRadius = UDim.new(0, 8)

-- Left section buttons
local leftX = 10
local leftWidth = 108
local leftNoteY = 120
local leftNoteHeight = 44
local ssBtnY = leftNoteY + leftNoteHeight + 6
local requireBtnY = ssBtnY + 34

-- Backdoor Note
local BackdoorNote = Instance.new("TextLabel")
BackdoorNote.Size = UDim2.new(0, leftWidth, 0, leftNoteHeight)
BackdoorNote.Position = UDim2.new(0, leftX, 0, leftNoteY)
BackdoorNote.BackgroundTransparency = 1
BackdoorNote.Text = "ONLY FOR BACKDOOR GAMES ðŸ‘‡"
BackdoorNote.TextColor3 = Color3.fromRGB(255, 255, 255)
BackdoorNote.Font = Enum.Font.GothamBold
BackdoorNote.TextSize = 12
BackdoorNote.TextWrapped = true
BackdoorNote.TextXAlignment = Enum.TextXAlignment.Center
BackdoorNote.TextYAlignment = Enum.TextYAlignment.Center
BackdoorNote.Parent = MainFrame
BackdoorNote.TextStrokeTransparency = 0.2
BackdoorNote.TextStrokeColor3 = Color3.new(0,0,0)

-- MakeBtn function with safe pcall loading
local function makeBtn(text, parent, cb)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(1, 0, 0, 32)
    b.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
    b.TextColor3 = Color3.new(1, 1, 1)
    b.Font = Enum.Font.GothamBold
    b.TextSize = 16
    b.Text = text
    b.Parent = parent
    Instance.new("UICorner", b).CornerRadius = UDim.new(0, 8)
    if cb then
        b.MouseButton1Click:Connect(function()
            local ok, err = pcall(cb)
            if not ok then
                warn("Failed to load script:", err)
            end
        end)
    end
    return b
end

-- Right side frame for buttons with UIListLayout
local RightFrame = Instance.new("Frame")
RightFrame.Size = UDim2.new(0.65, -20, 1, 0)
RightFrame.Position = UDim2.new(0.35, 0, 0, 0)
RightFrame.BackgroundTransparency = 1
RightFrame.Parent = MainFrame

local layout = Instance.new("UIListLayout")
layout.Padding = UDim.new(0, 4)
layout.FillDirection = Enum.FillDirection.Vertical
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Parent = RightFrame

-- Example: page 1 buttons
local pages = {}
pages[1] = {
    function() makeBtn("FLY", RightFrame, function() loadstring(game:HttpGet("https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt", true))() end) end,
    function() makeBtn("FLING", RightFrame, function() loadstring(game:HttpGet("https://pastebin.com/raw/VynRhxJV"))() end) end,
    function() makeBtn("ADMIN GUI", RightFrame, function() loadstring(game:HttpGet("https://raw.githubusercontent.com/yofriendfromschool1/Sky-Hub/main/FE%20Trolling%20GUI.luau", true))() end) end
}

-- Only show page 1 by default
for _, f in ipairs(pages[1]) do f() end

-- Draggable GUI with edge fix
local dragging, dragInput, dragStart, startPos
local function update(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(
        startPos.X.Scale, startPos.X.Offset + delta.X,
        startPos.Y.Scale, startPos.Y.Offset + delta.Y
    )
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then dragging = false end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then dragInput = input end
end)

UIS.InputChanged:Connect(function(input)
    if input == dragInput and dragging then update(input) end
end)

UIS.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then dragging = false end
end)

-- Smooth HSV animation
local hue = 0
RunService.RenderStepped:Connect(function(delta)
    hue = (hue + delta * 0.3) % 1
    MainFrame.BackgroundColor3 = Color3.fromHSV(hue, 0.75, 1)
    Title.TextColor3 = Color3.fromHSV((hue + 0.5) % 1, 0.9, 1)
end)
